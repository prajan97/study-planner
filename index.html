<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Study Time Planner - King's College London</title>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
      background: linear-gradient(135deg, #e52d27 0%, #b31217 100%);
      min-height: 100vh; padding: 20px;
    }
    .container {
      max-width: 1000px; margin: 0 auto; background: white; border-radius: 24px;
      box-shadow: 0 30px 90px rgba(0,0,0,0.3); overflow: hidden;
    }
    .header {
      background: linear-gradient(135deg, #e52d27 0%, #b31217 100%);
      color: white; padding: 60px 40px; text-align: center;
    }
    .header h1 { font-size: 36px; margin-bottom: 12px; font-weight: 700; }
    .header .subtitle { font-size: 18px; opacity: 0.95; }
    .header .uni-name { margin-top: 15px; font-size: 13px; font-weight: 600; letter-spacing: 2px; opacity: 0.85; }

    .content { padding: 50px 40px; }

    .intro-text {
      background: #f8f9fa; padding: 24px; border-radius: 12px;
      margin-bottom: 30px; border-left: 4px solid #e52d27;
    }
    .intro-text p { color: #495057; line-height: 1.7; font-size: 15px; }

    .tabs { display: flex; gap: 8px; margin-bottom: 30px; border-bottom: 2px solid #dee2e6; }
    .tab {
      padding: 16px 32px; background: transparent; border: none; cursor: pointer; font-size: 16px;
      font-weight: 600; color: #6c757d; border-bottom: 3px solid transparent; transition: all 0.3s;
    }
    .tab:hover { color: #e52d27; }
    .tab.active { color: #e52d27; border-bottom-color: #e52d27; }

    .tab-content { display: none; }
    .tab-content.active { display: block; }

    .form-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(280px, 1fr)); gap: 24px; margin-bottom: 30px; }
    label { display: block; margin-bottom: 10px; font-weight: 600; color: #212529; font-size: 15px; }
    input[type="number"] {
      width: 100%; padding: 16px; border: 2px solid #dee2e6; border-radius: 10px;
      font-size: 16px; transition: all 0.3s; background: white;
    }
    input[type="number"]:focus {
      outline: none; border-color: #e52d27; box-shadow: 0 0 0 4px rgba(229,45,39,0.1);
    }
    .helper-text { font-size: 13px; color: #6c757d; margin-top: 6px; }

    .calculate-btn {
      width: 100%; padding: 18px; background: linear-gradient(135deg, #e52d27 0%, #b31217 100%);
      color: white; border: none; border-radius: 12px; font-size: 18px; font-weight: 700; cursor: pointer;
      transition: 0.3s; margin-top: 20px; box-shadow: 0 8px 20px rgba(229,45,39,0.25);
    }
    .calculate-btn:hover { transform: translateY(-2px); box-shadow: 0 12px 30px rgba(229,45,39,0.35); }

    .results { margin-top: 40px; display: none; }
    .results.show { display: block; }

    .results-header { text-align: center; margin-bottom: 40px; }
    .results-header h2 { font-size: 32px; color: #212529; margin-bottom: 8px; font-weight: 700; }
    .results-header p { color: #6c757d; font-size: 16px; }

    .stats-showcase { display: grid; grid-template-columns: repeat(4, 1fr); gap: 20px; margin-bottom: 40px; }
    .stat-box {
      background: linear-gradient(135deg, #fff 0%, #f8f9fa 100%);
      padding: 24px; border-radius: 12px; text-align: center;
      border: 2px solid #e9ecef; transition: 0.3s;
    }
    .stat-box:hover { border-color: #e52d27; transform: translateY(-4px); box-shadow: 0 8px 20px rgba(0,0,0,0.08); }
    .stat-label { font-size: 12px; color: #6c757d; margin-bottom: 8px; text-transform: uppercase; }
    .stat-value { font-size: 36px; font-weight: 800; color: #e52d27; }

    .chart-container { background: #f8f9fa; padding: 30px; border-radius: 16px; box-shadow: 0 2px 8px rgba(0,0,0,0.04); margin-bottom: 40px; }
    .chart-title { font-size: 16px; font-weight: 700; color: #212529; margin-bottom: 20px; text-align: center; }
    .chart-wrapper { position: relative; height: 280px; }

    .calendar-section { background: #f8f9fa; padding: 35px; border-radius: 16px; margin-bottom: 40px; }
    .calendar-title { font-size: 20px; font-weight: 700; color: #212529; margin-bottom: 24px; text-align: center; }
    .calendar { display: grid; grid-template-columns: repeat(7, 1fr); gap: 12px; }
    .calendar-day {
      background: white; border-radius: 12px; padding: 20px 12px; text-align: center;
      border: 2px solid #dee2e6; transition: 0.3s;
    }
    .calendar-day.study-time { background: linear-gradient(135deg, #28a745 0%, #20c997 100%); color: white; border-color: #28a745; }
    .day-name-cal { font-size: 12px; font-weight: 700; margin-bottom: 8px; }
    .day-hours-cal { font-size: 24px; font-weight: 800; }

    .recommendation {
      background: linear-gradient(135deg, #fff5f5 0%, #ffe8e8 100%);
      padding: 35px; border-radius: 16px; border-left: 6px solid #e52d27; margin-bottom: 30px;
    }
    .recommendation-title { font-size: 24px; font-weight: 700; color: #e52d27; margin-bottom: 16px; }
    .recommendation-text { color: #495057; line-height: 1.8; font-size: 15px; }
    .recommendation-text strong { color: #e52d27; }

    .action-buttons { display: grid; grid-template-columns: 1fr 1fr; gap: 16px; margin-top: 40px; }
    .btn {
      padding: 16px 24px; border-radius: 10px; font-size: 16px; font-weight: 600;
      cursor: pointer; transition: 0.3s; border: none; text-align: center;
    }
    .btn-primary {
      background: linear-gradient(135deg, #e52d27 0%, #b31217 100%);
      color: white; box-shadow: 0 4px 12px rgba(229,45,39,0.25);
    }
    .btn-secondary { background: white; color: #e52d27; border: 2px solid #e52d27; }
  </style>
</head>
<body>
<div class="container">
  <div class="header">
    <h1>Professional Study Planner</h1>
    <div class="subtitle">Discover your personalised learning pathway</div>
    <div class="uni-name">KING'S COLLEGE LONDON</div>
  </div>

  <div class="content">
    <div class="intro-text">
      <p><strong>Welcome to your personalised study planning tool.</strong> Complete both sections to get an accurate picture of your available study time. Our flexible programmes are designed to fit around your life.</p>
    </div>

    <div class="tabs">
      <button class="tab active" data-tab="essential">Essential Commitments</button>
      <button class="tab" data-tab="lifestyle">Lifestyle & Wellbeing</button>
    </div>

    <form id="calculatorForm">
      <div id="essential" class="tab-content active">
        <div class="form-grid">
          <div>
            <label>Work & Commute (hours/week)</label>
            <input type="number" id="work" min="0" max="168" value="40" />
          </div>
          <div>
            <label>Sleep (hours/week)</label>
            <input type="number" id="sleep" min="0" max="168" value="49" />
          </div>
          <div>
            <label>Meals & Food Preparation (hours/week)</label>
            <input type="number" id="meals" min="0" max="168" value="14" />
          </div>
          <div>
            <label>Family Commitments (hours/week)</label>
            <input type="number" id="family" min="0" max="168" value="20" />
          </div>
        </div>
      </div>

      <div id="lifestyle" class="tab-content">
        <div class="form-grid">
          <div>
            <label>Personal Care & Hygiene (hours/week)</label>
            <input type="number" id="hygiene" min="0" max="168" value="7" />
          </div>
          <div>
            <label>Exercise & Fitness (hours/week)</label>
            <input type="number" id="exercise" min="0" max="168" value="5" />
          </div>
          <div>
            <label>Social & Leisure Time (hours/week)</label>
            <input type="number" id="social" min="0" max="168" value="10" />
          </div>
        </div>
      </div>

      <button type="submit" class="calculate-btn">Generate My Study Plan</button>
    </form>

    <div id="results" class="results">
      <div class="results-header">
        <h2>Your Personalised Study Plan</h2>
        <p>Based on your schedule analysis</p>
      </div>

      <div class="stats-showcase">
        <div class="stat-box"><div class="stat-label">Weekly</div><div class="stat-value" id="weeklyHours">0h</div></div>
        <div class="stat-box"><div class="stat-label">Daily Avg</div><div class="stat-value" id="dailyHours">0h</div></div>
        <div class="stat-box"><div class="stat-label">Monthly</div><div class="stat-value" id="monthlyHours">0h</div></div>
        <div class="stat-box"><div class="stat-label">Yearly</div><div class="stat-value" id="yearlyHours">0h</div></div>
      </div>

      <div class="chart-container">
        <div class="chart-title">Weekly Time Allocation</div>
        <div class="chart-wrapper"><canvas id="pieChart"></canvas></div>
      </div>

      <div class="calendar-section">
        <div class="calendar-title">Your Weekly Study Schedule</div>
        <div class="calendar" id="calendar"></div>
      </div>

      <div class="recommendation">
        <div class="recommendation-title" id="recommendationTitle">Your Programme Recommendations</div>
        <div class="recommendation-text" id="recommendationText"></div>
      </div>

      <div class="action-buttons">
        <button class="btn btn-primary" id="emailBtn">Email My Study Plan</button>
        <button class="btn btn-secondary" id="downloadBtn">Download as PDF</button>
      </div>
    </div>
  </div>
</div>

<script>
const tabs = document.querySelectorAll('.tab');
const tabContents = document.querySelectorAll('.tab-content');
tabs.forEach(tab=>{
  tab.addEventListener('click',()=>{
    const target=tab.getAttribute('data-tab');
    tabs.forEach(t=>t.classList.remove('active'));
    tabContents.forEach(tc=>tc.classList.remove('active'));
    tab.classList.add('active');
    document.getElementById(target).classList.add('active');
  });
});

const days=[{name:'Mon',full:'Monday'},{name:'Tue',full:'Tuesday'},{name:'Wed',full:'Wednesday'},{name:'Thu',full:'Thursday'},{name:'Fri',full:'Friday'},{name:'Sat',full:'Saturday'},{name:'Sun',full:'Sunday'}];
let pieChart;

document.getElementById('calculatorForm').addEventListener('submit',function(e){
  e.preventDefault();
  const work=+document.getElementById('work').value||0;
  const sleep=+document.getElementById('sleep').value||0;
  const meals=+document.getElementById('meals').value||0;
  const hygiene=+document.getElementById('hygiene').value||0;
  const family=+document.getElementById('family').value||0;
  const exercise=+document.getElementById('exercise').value||0;
  const social=+document.getElementById('social').value||0;
  const totalCommitted=work+sleep+meals+hygiene+family+exercise+social;
  let available=168-totalCommitted;
  if(available<0)available=0;
  const perDay=(available/7).toFixed(1);
  const perMonth=(available*4.33).toFixed(0);
  const perYear=(available*52).toFixed(0);
  document.getElementById('weeklyHours').textContent=available.toFixed(0)+'h';
  document.getElementById('dailyHours').textContent=perDay+'h';
  document.getElementById('monthlyHours').textContent=perMonth+'h';
  document.getElementById('yearlyHours').textContent=perYear+'h';
  createPie(work,sleep,meals,hygiene,family,exercise,social,available);
  createCalendar(perDay);
  generateRecommendation(available,perYear);
  document.getElementById('results').classList.add('show');
});

function createPie(work,sleep,meals,hygiene,family,exercise,social,available){
  const ctx=document.getElementById('pieChart').getContext('2d');
  if(pieChart)pieChart.destroy();
  pieChart=new Chart(ctx,{
    type:'doughnut',
    data:{
      labels:['Work','Sleep','Meals','Hygiene','Family','Exercise','Social','Study Time'],
      datasets:[{data:[work,sleep,meals,hygiene,family,exercise,social,available],
      backgroundColor:['#e52d27','#6c757d','#fd7e14','#20c997','#ff6b6b','#4ecdc4','#ffc107','#28a745'],borderWidth:0}]
    },
    options:{responsive:true,maintainAspectRatio:false,plugins:{legend:{position:'bottom'}}}
  });
}

function createCalendar(perDay){
  const calendar=document.getElementById('calendar');calendar.innerHTML='';
  days.forEach(d=>{
    const el=document.createElement('div');
    el.className='calendar-day study-time';
    el.innerHTML=`<div class="day-name-cal">${d.name}</div><div class="day-hours-cal">${perDay}h</div>`;
    calendar.appendChild(el);
  });
}

function generateRecommendation(available,perYear){
  let title,text;
  if(available>=20){title='Excellent Capacity: Multiple Programme Options';text=`<strong>You have exceptional study capacity.</strong> With ${available.toFixed(0)} hours weekly (${perYear} hours annually), you could pursue full-time or intensive part-time programmes.`;}
  else if(available>=12){title='Strong Capacity: Ideal for Part-Time Study';text=`<strong>Your schedule suits part-time learning.</strong> ${available.toFixed(0)} hours per week (${perYear} annually) aligns with 2–3 year part-time Master’s or certificates.`;}
  else if(available>=7){title='Good Capacity: Flexible Learning Recommended';text=`<strong>Your schedule supports flexible learning.</strong> ${available.toFixed(0)} weekly hours (~${perYear}/year) fit self-paced or modular formats.`;}
  else if(available>=3){title='Moderate Capacity: Micro-Learning Approach';text=`<strong>Your schedule is ideal for micro-learning.</strong> ${available.toFixed(0)}
